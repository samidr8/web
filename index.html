<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="config-sensores.css">
  <link rel="stylesheet" href="UI-personalizado.css">
</head>

<body>
  <a-scene mindar-image="imageTargetSrc: tarjetas/targets.mind;" color-space="sRGB"
    renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false"
    device-orientation-permission-ui="enabled: false">

    <a-assets>
      <!-- Modelo 3D cargado directamente -->
      <a-asset-item id="shibaModel" src="media/shiba/scene.gltf"></a-asset-item>
    </a-assets>

    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

    <!-- Target 0: Video de YouTube -->
    <a-entity mindar-image-target="targetIndex: 0"></a-entity>

    <!-- Target 1: GeoGebra -->
    <a-entity mindar-image-target="targetIndex: 1"></a-entity>

    <!-- Target 2: Página web -->
    <a-entity mindar-image-target="targetIndex: 2"></a-entity>

    <!-- Target 3: Modelo 3D (ajustando escala como en tu ejemplo funcional) -->
    <a-entity mindar-image-target="targetIndex: 3">
      <a-gltf-model 
        rotation="0 0 0" 
        position="0 0 0.1" 
        scale="1 1 1" 
        src="#shibaModel"
        animation="property: position; to: 0 0.1 0.1; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate">
      </a-gltf-model>
    </a-entity>

    <!-- Target 4: Podcast -->
    <a-entity mindar-image-target="targetIndex: 4"></a-entity>

    <!-- Target 5: Imagen -->
    <a-entity mindar-image-target="targetIndex: 5"></a-entity>
  </a-scene>

  <!-- Contenedores de contenido -->
  <div id="youtube-container" class="content-container">
    <div class="youtube-player">
      <button class="close-btn" id="youtube-close-btn">X</button>
      <iframe id="youtube-iframe" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
    </div>
  </div>

  <div id="geogebra-container" class="content-container">
    <div class="geogebra-player">
      <button class="close-btn" id="geogebra-close-btn">X</button>
      <iframe id="geogebra-iframe" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
    </div>
  </div>

  <div id="webpage-container" class="content-container">
    <div class="webpage-alert" id="webpage-alert">
      <button class="close-btn" id="webpage-close-btn">X</button>
      <p>El sitio web no puede mostrarse directamente debido a políticas de seguridad. ¿Deseas abrirlo en tu navegador?</p>
      <div style="margin-top: 20px; display: flex; flex-direction: column; gap: 10px;">
        <button class="alert-btn open-browser-btn" id="open-browser-btn">Abrir en navegador</button>
        <button class="alert-btn cancel-btn" id="cancel-webpage-btn">Cancelar</button>
      </div>
    </div>
  </div>

  <div id="podcast-container" class="content-container">
    <div class="audio-player">
      <button class="close-btn" id="podcast-close-btn">X</button>
      <div class="audio-title">Podcast</div>
      <input type="range" class="audio-progress" id="podcast-progress" min="0" max="100" value="0">
      <div class="audio-time">
        <span id="podcast-current-time">00:00</span>
        <span id="podcast-duration">00:00</span>
      </div>
      <div class="audio-controls">
        <button class="audio-btn" id="podcast-play-btn">▶</button>
        <button class="audio-btn" id="podcast-pause-btn">⏸</button>
        <button class="audio-btn" id="podcast-stop-btn">⏹</button>
      </div>
    </div>
  </div>

  <div id="imagen-container" class="content-container">
    <div class="image-viewer">
      <button class="close-btn" id="imagen-close-btn">X</button>
      <img id="imagen-view" src="" alt="Imagen">
    </div>
  </div>

  <!-- Mensaje de carga de recurso AR -->
  <div id="ar-resource-loader" class="content-container" style="display: none;">
    <div class="resource-loader">
      <div class="loader-text">Cargando recurso AR...</div>
      <div class="loader-bar-container">
        <div id="resource-loader-bar" class="loader-bar"></div>
      </div>
    </div>
  </div>

  <!-- Loader inicial -->
  <div id="ar-loader">
    <div class="loader-content">
      <h2>Preparando experiencia de Realidad Aumentada</h2>
      <p>Por favor espera mientras se cargan los recursos esenciales...</p>
      <div class="loader-bar-container">
        <div id="loader-bar" class="loader-bar"></div>
      </div>
    </div>
  </div>

  <script src="resources.js"></script>
  <script src="performance-monitor.js"></script>
  <script src="video.js"></script>
  <script src="sound.js"></script>
  <script src="imagen.js"></script>
  <script src="applets.js"></script>
  <script src="paginaweb.js"></script>
  <script src="functions.js"></script>
  <script src="config-sensores.js"></script>
  <script src="UI-personalizado.js"></script>
</body>
</html>