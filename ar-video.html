<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AR con Marcador Personalizado</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>
    body { margin: 0; overflow: hidden; }
    #startButton {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 20px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      z-index: 1000;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <a-scene embedded arjs='sourceType: webcam; detectionMode: manual;'>
    <!-- Marcador personalizado -->
    <a-marker type="pattern" url="estrella.patt">
      <a-video src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" 
               width="1.6" height="0.9" position="0 0.5 0" rotation="-90 0 0"></a-video>
    </a-marker>
    <a-entity camera></a-entity>
  </a-scene>

  <button id="startButton">ACTIVAR CÁMARA</button>

  <script>
    document.getElementById('startButton').addEventListener('click', () => {
      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video: true })
          .then(() => {
            document.getElementById('startButton').style.display = 'none';
            // Iniciar detección AR manualmente
            const scene = document.querySelector('a-scene');
            if (scene.arjs) {
              scene.arjs.start();
            }
          })
          .catch(error => {
            alert("Permite el acceso a la cámara para usar AR.");
          });
      }
    });
  </script>
</body>
</html>